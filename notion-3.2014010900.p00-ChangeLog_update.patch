diff -rupN notion/ChangeLog notion-patched/ChangeLog
--- notion/ChangeLog	2010-12-16 10:57:50.000000000 -0500
+++ notion-patched/ChangeLog	2014-01-05 13:59:46.163582653 -0500
@@ -1 +1,1005 @@
-(The ChangeLog will be generated by release scripts from svn logs)
+2014-01-04  Arnout Engelen  <arnouten@bzzt.net>
+
+	Simple lua repl for testing
+
+	Better error message
+
+	Include mod_xkbevents instead of using a submodule
+
+	Include mod_xrandr instead of using submodules
+
+	Include mod_xinerama instead of using submodules
+
+	Include notionflux in the main repo instead of its own submodule
+
+	Make 'contrib' a normal folder rather than a git submodule
+
+2013-12-16  Arnout Engelen  <arnouten@bzzt.net>
+
+	More specifically name WGroup's
+
+	Newer versions of libextl and libtu
+
+2013-12-05  Arnout Engelen  <arnouten@bzzt.net>
+
+	Use UTF-8 instead of LATIN1 for manpages and welcome heading
+
+	Use explicit window names for WFrames
+
+2013-12-01  Arnout Engelen  <arnouten@bzzt.net>
+
+	More specific names for diffent kinds of Frame's
+
+	Prevent overflow while calculating frame size hints
+	Fixes #67
+
+2013-11-26  Arnout Engelen  <arnouten@bzzt.net>
+
+	Better explain the need for explicitly closing statusd on deinit
+
+2013-11-26  Jeff Backus  <jeff.backus@gmail.com>
+
+	* Documented reason / bug at head of _terminate_statusd(). * Added a return 0 to the end of _terminate_statusd().
+
+	* Forgot to clear out the old statusd pid after terminating it.
+
+	* Fixed a typo w/ hook. Now properly terminates ion-statusd on exit.
+
+	* Fixed a typo. It now compiles.
+
+	* Added a _terminate_statusd function to statusd-launch.c that will attempt to kill the specified process. * Added code to mod_statusbar.lua that will add a deinit hook and call _terminate_statusd on the statusd process.
+
+2013-11-26  Arnout Engelen  <arnouten@bzzt.net>
+
+	Add comments to fork() logic for readibility
+
+2013-11-25  Etan Reisner  <deryni@unreliablesource.net>
+
+	LUA_INCLUDES can legitimately be empty (e.g. on gentoo).
+	The rest of this file is a bit debian-specific (and friends) also but this is
+	the only part that seems to get in the way at the moment. The 5.0 fallback
+	makes the rest work out.
+
+2013-11-03  Arnout Engelen  <arnouten@bzzt.net>
+
+	build efficiency improvement thanks to Dima Kogan
+
+	Update contrib
+
+2013-11-02  Arnout Engelen  <arnouten@bzzt.net>
+
+	use $(CC) rather than 'gcc'
+	https://sourceforge.net/p/notion/bugs/62/
+
+	Removed old stuff from system-inc.mk
+	Thanks to Olof Johansson for noticing
+
+2013-09-16  Arnout Engelen  <arnouten@bzzt.net>
+
+	Fix segfault when logging not finding a font
+
+2013-09-10  Arnout Engelen  <arnouten@bzzt.net>
+
+	Improved lua version detection (thanks Nikolay Orlyuk and Justin Lebar!)
+	https://sourceforge.net/p/notion/bugs/64/
+
+	Slightly better logging for font loading
+
+2013-08-05  Arnout Engelen  <arnouten@bzzt.net>
+
+	Compile warning
+
+	Be more forgiving when XCreateFontSet creates a fontset with missing charsets
+	Especially utf-8 locales list unreasonable amounts of charsets as requirements.
+	When a font can be found that satisfies some, but not all of them, we just use
+	the font and write a warning into the logging. A user who really cares about
+	all those charsets can fix his configuration himself.
+
+2013-07-28  Arnout Engelen  <arnouten@bzzt.net>
+
+	In use_mb mode, use a more reasonable default/fallback font.
+	'fixed' does not exist for the multibyte font searching methods, and it does
+	not make sense to have this be a compile-time option.
+
+2013-07-22  Arnout Engelen  <arnouten@bzzt.net>
+
+	Correct error message when no fontset was found
+
+2013-07-21  Arnout Engelen  <arnouten@bzzt.net>
+
+	Add target to quickly compile a snapshot version
+
+	Only build the 'travis' github branch on Travis
+
+	Also make C99_SOURCE overridable
+
+2013-07-21  Olof Johansson  <olof@ethup.se>
+
+	build: Use more overrideable system-autodetect.mk
+	With these changes, some commonly overrided values can be exported
+	from the environment to influence the build output (e.g. PREFIX, CFLAGS,
+	INSTALL, etc). You can also specify the lua version you'd like to use
+	with the following variable: "LUA_VERSION" (if not specified, it tries
+	to detect the highest lua version available (as seen by pkg-config)).
+
+2013-07-21  Arnout Engelen  <arnouten@bzzt.net>
+
+	Also log date and time
+
+	Also log the loglevel
+
+	Build with C99 by default (but older C is still supported)
+
+	More debug-logging for loading fontsets
+
+	Log startup
+
+	Also log the function name
+
+	Support building with -std=c99
+
+	More flexible logging subsystem
+	For now we'll let this live alongside the existing libtu 'warn' infrastructure
+
+2013-05-23  Arnout Engelen  <arnouten@bzzt.net>
+
+	Rename 'goto_' to 'goto_focus', keep backwards compatibility
+	restore backwards compatibility for display(), too
+
+2013-05-10  Arnout Engelen  <arnouten@bzzt.net>
+
+	document a field
+
+	New mod_xrandr fixes a bug with rearranging workspaces when disconnecting a monitor
+
+	Fix unittests for mod_xinerama and mod_xrandr, have them run on 'make test'
+
+2013-04-05  Arnout Engelen  <arnouten@bzzt.net>
+
+	New versions of mod_xinerama and mod_xrandr
+	(to rearrange workspaces before closing superfluous screens)
+
+2013-03-03  Arnout Engelen  <arnouten@bzzt.net>
+
+	new mod_xrandr
+
+2013-03-02  Arnout Engelen  <arnouten@bzzt.net>
+
+	Introduce 'make dist' as a './predist.sh' replacement
+
+	Much simpler release procedure due to recent improvements in project setup
+
+2013-02-03  Philipp Hartwig  <ph@phhart.de>
+
+	Reflect that mod_xrandr is now loaded by default
+
+	Enable mod_xrandr by default
+
+2013-01-03  Philipp Hartwig  <ph@phhart.de>
+
+	Only allow removal of last workspace if there are multiple screens
+	This is a more conservative version of
+	ca7765688c5532f55281089a66a42b176f7849e5: it preserves the behavior of
+	Ion3 in case there is a single screen.
+
+	But we still want to be able to remove the last workspace from a screen
+	if there are multiple screens: this is used in the redistribution of
+	workspaces on detaching and attaching screens.
+
+2013-01-03  Philipp Hartwig  <ph@phhart.de>
+
+	Prevent closing of last screen
+	In the absence of a screen, Notion seems to be irrecoverably broken and
+	needs to be restarted.
+
+2012-12-26  Philipp Hartwig  <ph@phhart.de>
+
+	Close watches along with screen
+	Attach the notifywin of screen 1 to screen 0 and close screen 1
+	(cfg_xrandr.lua triggers this behavior). Before, an orphaned notifywin
+	would survive and Notion would crash when trying to close it.
+
+	Fix typo in d7ec9e706e14f568cf025b1a3ffc280c9bad9ed6
+
+2012-12-23  Philipp Hartwig  <ph@phhart.de>
+
+	Update activity notification on reattaching
+	The region_set_activity(reg, SETPARAM_UNSET) in region_detach_manager
+	did not take care of clearing the activity notification on the old
+	screen because the attaching happens on the level of the WGroup, while
+	the activity flag is set on the client itself.
+
+	Closes
+	https://sourceforge.net/tracker/?func=detail&aid=3009515&group_id=314802&atid=1324528
+
+2012-12-18  Philipp Hartwig  <ph@phhart.de>
+
+	Revert "groupws_set_initial_outputs is not safe"
+	Unfortunately this breaks at least the screen_managed_changed_hook in
+	cfg_xrandr.lua and I don't see an immediate way around that.
+
+	This reverts commit 59976673d9d454378e7c722f38001434343e90d3.
+
+2012-12-18  Philipp Hartwig  <ph@phhart.de>
+
+	groupws_set_initial_outputs is not safe
+
+2012-12-03  Philipp Hartwig  <ph@phhart.de>
+
+	Change documentation of WRegion.goto_
+
+2012-11-18  Philipp Hartwig  <ph@phhart.de>
+
+	display -> goto_
+	Display is not a good name and goto_ is closest to what we have right
+	now.
+
+	Use StringIntMap for window_stacking_request
+
+2012-11-16  Philipp Hartwig  <ph@phhart.de>
+
+	New versions of mod_xinerama and mod_xrandr
+
+	Make gcc happy by not mixing code and declarations
+
+2012-11-16  Dima Kogan  <dima@secretsauce.net>
+
+	added configuration option to allow the user to block responding to stacking events
+
+2012-10-26  Philipp Hartwig  <ph@phhart.de>
+
+	Revert "Update copyright header of de/fontset.c"
+	In fact src/Screen.cc of the Blackbox WM did contain the code in
+	question under the MIT license until
+	    revision 1.155
+	    date: 2002/10/22 09:42:44;  author: bradleyhughes;  state: Exp;  lines: +0 -204
+	    remove font loading from BScreen
+	See http://blackboxwm.cvs.sourceforge.net/viewvc/blackboxwm/blackbox/
+
+	Thanks to Dima Kogan for pointing this out.
+
+	This reverts commit 47268089b00c88d16ed6827d172bf3a79a4b72b7.
+
+2012-10-06  Philipp Hartwig  <ph@phhart.de>
+
+	Expose is_scratchpad and create_scratchpad to Lua
+
+2012-10-02  Philipp Hartwig  <ph@phhart.de>
+
+	New mod_notionflux
+
+2012-10-01  Philipp Hartwig  <ph@phhart.de>
+
+	Enhance information on build dependencies
+
+2012-09-30  Philipp Hartwig  <ph@phhart.de>
+
+	Honor InputHint in accordance with ICCCM
+	This should fix problems with the keyboard focus in Java applications, see
+	https://sourceforge.net/tracker/?func=detail&aid=3572450&group_id=314802&atid=1324528
+
+	New mod_xrandr
+
+	New contrib
+
+	Merge branch 'master' of ssh://notion.git.sourceforge.net/gitroot/notion/notion
+
+	Make group_get_configuration available for use in group-ws
+
+	Manage and save list of preferred outputs for workspaces
+	In combination with mod_xrandr, this allows for saving information about
+	the screen output that a workspace was created on. This information is
+	used for moving the workspace to an appropriate location when
+	(un-)plugging a screen.
+
+2012-09-02  Arnout  <arnouten@bzzt.net>
+
+	Mark GIMP 'acrobatic' to avoid flickering behavior
+	https://sourceforge.net/tracker/?func=detail&aid=3471910&group_id=314802&atid=1324528
+
+2012-08-27  Arnout Engelen  <arnouten@bzzt.net>
+
+	new contrib
+
+	Merge branch 'master' of ssh://notion.git.sourceforge.net/gitroot/notion/notion
+
+2012-08-26  Arnout  <arnouten@bzzt.net>
+
+	Merge remote-tracking branch 'remotes/ph/master'
+
+2012-08-26  Philipp Hartwig  <ph@phhart.de>
+
+	Document mousefocus option in cfg_notion.lua
+
+2012-08-26  Arnout  <arnouten@bzzt.net>
+
+	Measure in microseconds.
+	Because of overhead and clock resolution microseconds are probably
+	mostly meaningless, but milliseconds seems a bit too course and anything
+	in-between is hard to describe :)
+
+2012-08-26  Philipp Hartwig  <ph@phhart.de>
+
+	Merge branch 'master' of git://notion.git.sourceforge.net/gitroot/notion/notion
+
+2012-08-26  Arnout  <arnouten@bzzt.net>
+
+	Merge remote-tracking branch 'remotes/ph/master'
+
+	Give notion some time to properly shut down before starting it again
+
+2012-08-26  Philipp Hartwig  <ph@phhart.de>
+
+	Merge branch 'master' of git://notion.git.sourceforge.net/gitroot/notion/notion
+
+2012-08-25  Arnout  <arnouten@bzzt.net>
+
+	New xrandr with improved workspace rearrangement on attach/detach
+
+	Use the faster mod_xrandr
+
+	Support for profiling the lua side, too.
+
+2012-08-24  Arnout  <arnouten@bzzt.net>
+
+	newer mod_notionflux (to be able to build with preloading modules again)
+
+	Profiling is now functional for the C side, as long as you preload the modules
+
+	Properly format the nanoseconds part
+
+2012-08-22  Arnout  <arnouten@bzzt.net>
+
+	Profiling utilities
+
+	Use GCC-specific (__cyg_profile_func_enter-based) profiling
+
+2012-08-12  Philipp Hartwig  <ph@phhart.de>
+
+	Slightly refactor last commit and remove redundant cast
+
+	Don't move the stdisp along with workspaces
+	We achieve this by first unmanaging the stdisp.
+
+2012-08-05  Arnout  <arnouten@bzzt.net>
+
+	Allow profiling by google perftools (use -DENABLE_PROFILING at build time)
+
+2012-07-31  Arnout Engelen  <arnouten@bzzt.net>
+
+	document system-local.mk
+
+2012-07-29  Arnout  <arnouten@bzzt.net>
+
+	Merge branch 'master' of ssh://notion.git.sourceforge.net/gitroot/notion/notion
+
+	Use META+(Shift+)scrollwheel to switch windows
+	Works nicely for the common cases where the mouse pointer is in the focused
+	window. When the mouse pointer is not in the focussed window, I'm not entirely
+	sure what behavior is desirable. Right now it scrolls through the tabs of the
+	frame with the mouse pointer for horizontal scrolling, and behaves somewhat
+	erratically for vertical scrolling.
+
+2012-07-27  Matthias Lederhofer  <matled@gmx.net>
+
+	fix comment in build/system-inc.mk
+
+2012-07-26  Arnout Engelen  <arnouten@bzzt.net>
+
+	Make system.mk logic consistent
+
+	No longer suggest changing the LUA settings, these should be autodetected
+
+2012-07-26  Matthias Lederhofer  <matled@gmx.net>
+
+	add notes about getting and updating the source to README
+	I struggled a bit to update to the latest version of notion because
+	new submodules were added.  The natural place to look first was the
+	README file, which didn't tell anything about this problem, except for
+	the wiki link.  I think it would be nice to have a note about this in
+	the README.
+
+2012-07-26  Arnout Engelen  <arnouten@bzzt.net>
+
+	To newest mod_xrandr: detaching/attaching screens should be handled better now
+
+2012-07-23  Arnout Engelen  <arnouten@bzzt.net>
+
+	mod_xrandr improvements
+	there's even more bleeding-edge goodnes in the restore_workspace_location
+	branch
+
+	META-L is 'Lock screen', META-K L 'nudge'
+
+2012-07-21  Arnout Engelen  <arnouten@bzzt.net>
+
+	Merge branch 'master' of ssh://notion.git.sourceforge.net/gitroot/notion/notion
+
+	Integration/regression testing for mod_xrandr
+
+2012-07-20  Arnout Engelen  <arnouten@bzzt.net>
+
+	new mod_notionflux
+
+	document where the posix module is on Debian
+
+	new mod_xinerama, repopulating screens in seperate call
+
+2012-07-01  Arnout  <arnouten@bzzt.net>
+
+	Merge branch 'master' of ssh://notion.git.sourceforge.net/gitroot/notion/notion
+
+	Use 'xscreensaver-command -lock' when available
+
+	Put 'Docker' in the 'systray' status bar
+
+	Pass on 'HAS_SYSTEM_ASPRINTF' to the C preprocessor
+
+	Use 'xscreensaver-command -lock' when available
+
+	Put 'Docker' in the 'systray' status bar
+
+	Pass on 'HAS_SYSTEM_ASPRINTF' to the C preprocessor
+
+	Merge branch 'master' of ssh://notion.git.sourceforge.net/gitroot/notion/notion
+
+2012-06-24  Arnout Engelen  <arnouten@bzzt.net>
+
+	Only define LUA when lua is actually on the PATH
+
+2012-06-22  Arnout Engelen  <arnouten@bzzt.net>
+
+	Which dependencies to install for Debian (probably incomplete)
+
+2012-06-15  Arnout Engelen  <arnouten@bzzt.net>
+
+	New version of mod_xinerama
+
+	Test for desired behavior: a new screen should get a default workspace
+
+	pass on to the right sub-makefile target
+
+	new mod_xinerama, which removes unused screen objects
+
+	allow screens to be removed, don't return a screen for an invalid screen id
+
+	Allow multiple tests per suite, allow monitor layout changes, allow for asynchronous screen deletion
+
+	Add fake-xinerama, create test that tests spurious screens are removed
+
+	use homedir per test
+
+2012-06-15  Arnout Engelen  <arnouten@bzzt.net>
+
+	Revert "link mute/volumeup/volumedown keys to respective amixer commands"
+	You can achieve the same with xbindkeys:
+
+	"amixer sset Master 3%+"
+	    m:0x0 + c:123
+	    XF86AudioRaiseVolume
+
+	"amixer sset Master 3%-"
+	    m:0x0 + c:122
+	    XF86AudioLowerVolume
+
+	"amixer sset Master toggle"
+	    m:0x0 + c:121
+	    XF86AudioMute
+
+	so the wm can/should stay out of this
+
+	This reverts commit b67a62499eb2791570839c4871b8b41e072519e7.
+
+2012-06-15  Arnout Engelen  <arnouten@bzzt.net>
+
+	Enable mod_notionflux by default
+
+	Reserve more video memory for Xdummy
+
+	Better error reporting for unittests
+
+2012-06-13  Arnout Engelen  <arnouten@bzzt.net>
+
+	Merge remote-tracking branch 'remotes/ph/savelayout'
+
+2012-06-10  Arnout Engelen  <arnouten@bzzt.net>
+
+	Also support "Mod1+`" for 'next screen'
+
+	easier keybindings for working with multiple monitors
+
+	link mute/volumeup/volumedown keys to respective amixer commands
+
+	Kludge to better position xfce4 notification popups (if you want to run those at all...)
+
+	Merge branch 'master' into maximization
+
+	Merge branch 'master' of https://github.com/AopicieR/notion_aopicier
+
+	Versions of lua libs and lua interpreter actually should be consistent
+
+2012-06-09  Arnout Engelen  <arnouten@bzzt.net>
+
+	Correctly build even when lua interpreter and lua libraries are different versions
+	Fixes https://sourceforge.net/tracker/?func=detail&aid=3525658&group_id=314802&atid=1324528
+
+2012-06-05  Philipp Hartwig  <ph@phhart.de>
+
+	Update copyright header of de/fontset.c
+	Most of the code seems to be a verbatim copy of
+	<http://www.debian.org/doc/manuals/intro-i18n/ch-examples.en.html#s13.4.5>
+	which is licensed under the GPL, so that we can hardly ship it with an
+	MIT license copyright header. I don't see any similarity whatsoever to
+	the the file "Screen.cc for Blackbox - an X11 Window manager" mentioned
+	in the header (which is indeed published under the MIT license). So I've
+	simply dropped the reference to the latter file and put this file under
+	the GPL.
+
+2012-06-04  Philipp Hartwig  <ph@phhart.de>
+
+	Allow for not automatically saving the layout
+
+2012-05-26  Arnout  <arnouten@bzzt.net>
+
+	new mod_xinerama and mod_xrandr versions
+
+2012-05-13  Philipp Hartwig  <ph@phhart.de>
+
+	Cleanup 1000
+
+2012-05-13  Arnout  <arnouten@bzzt.net>
+
+	Merge branch 'master' of ssh://notion.git.sourceforge.net/gitroot/notion/notion
+
+	Replace deprecated XKeycodeToKeysym with XkbKeycodeToKeysym
+	Thanks Philipp for noticing. While XKB is strictly spoken an extension, it
+	looks like it has been available through the standard X libraries on all major
+	systems (linux, freebsd, cygwin) for quite some time now. Not entirely sure
+	about Solaris. We can make this a system.mk option (default on) if this is a
+	problem for any current system.
+
+2012-05-12  Philipp Hartwig  <ph@phhart.de>
+
+	Cleanup
+
+2012-05-11  Philipp Hartwig  <ph@phhart.de>
+
+	Another few small improvements
+	In particular don't take the stdisp into account in case it is
+	fullsized. Also don't abuse binary operators as replacements for logical
+	operators to prevent short-circuit evaluation.
+
+	Small refactoring, correcting inaccuracy in last commit
+
+	Add some comments
+
+2012-05-10  Arnout Engelen  <arnouten@bzzt.net>
+
+	make note of fakexinerama, thanks to sECuRE @i3wm
+
+2012-05-10  Philipp Hartwig  <ph@phhart.de>
+
+	Cleanup
+
+2012-05-10  Philipp Hartwig  <ph@phhart.de>
+
+	Check on restoring that the restored geometry fits over the stdisp
+	This takes care of the first TODO mentioned in the commit message of
+	7d5c5aaa445b21ce5db9b74b627ebc25a1798813
+
+	The second one has already been addressed in commit
+	7db995d47bcdf9238a6bfd809d3a13a1b68dd356
+
+2012-05-10  Philipp Hartwig  <ph@phhart.de>
+
+	Cleanup
+
+2012-05-10  Arnout  <arnouten@bzzt.net>
+
+	A very rough start on 'make test' regression/integration tests
+
+	new notionflux
+
+	new notionflux
+
+2012-05-09  Arnout Engelen  <arnouten@bzzt.net>
+
+	Use newer libextl
+
+	(not)ionflux submodule
+
+2012-05-09  Philipp Hartwig  <ph@phhart.de>
+
+	Change handling of geometry of stdisp
+	Before we set the geometry of the stdisp to its correct target geometry.
+	This however renders the whole tiling inconsistent. Also taking into
+	account the geometry changes from mmoving away from the stdisp renders
+	the tiling inconsistent. We tried to counter this by calling
+	tiling_manage_stdisp, but it turns out that this is not good enough to
+	repair the tiling.
+
+	So now we resize the stdisp to the geometry that is necessary to keep
+	the tiling consistent and then call split_sanitize_stdisp. Also we only
+	use the geometry calculated for frames moving away from the stdisp for
+	updating the window informations, while using a fake geometry
+	information for the split without these changes. split_sanitize_stdisp
+	will then update the tiling in a way that again accomodates the frames
+	that are temporarily bigger than their surrounding splits. Still should
+	combine the advantages of using the correct geometry (which massively
+	avoids flickering in programs with resizing problems, notably ncurses
+	based ones) and of having consistent tiling (desirable for obvious
+	reasons).
+
+2012-05-09  Philipp Hartwig  <ph@phhart.de>
+
+	Cleanup
+
+	Trivial typos, causing a lot of trouble
+	The refactored code seems to work as expected now
+
+	Closer to goal
+
+	Attempt to unify vertical and horizontal stdisp
+	Fails yet
+
+2012-05-08  Philipp Hartwig  <ph@phhart.de>
+
+	Add support for vertical stdisp
+	Also refactor most of the logic of the code into several functions
+
+	Restore maximized flag if it was removed because of stdisp
+
+	Reorder functions
+
+	Fix mistakes in calcluation
+
+	Support all horizontal stdisp's
+	Also rearrange most of the code.
+	TODO:
+	- If a vertically maximized frame is horizontally maximized and then
+	  restored, check that the saved geometry really fits over the stdisp.
+	- If a vertically maximized frame is horizontally restored, we adapt its
+	  height in case the stdisp is removed, but currently the
+	  FRAME_MAXED_VERT flag is lost in the process. Preserve it or set it
+	  again.
+
+2012-05-06  Philipp Hartwig  <ph@phhart.de>
+
+	Small cleanup
+
+	Handle case of non-fs, horiz. stdisp in bl corner
+	This seems to take care of the two problems mentioned in the message to
+	commit 8370a156ae6440e3983486ca4c7a167caf72cf25 in the special case that
+	the potential non-fullsized stdisp is positioned in the lower left
+	corner and has a horizontal orientation. This should be the most
+	commmon case. Adding support for other cases is not difficult (maybe a
+	horizontal stdisp in the upper left corner is not that uncommon?), but
+	it will only happen on request.
+
+2012-05-06  Philipp Hartwig  <ph@phhart.de>
+
+	Don't ignore the stdisp after all, use less precise verification
+	Removing and readding the stdisp had ugly side effects, like the
+	flickering I've been trying to address with several commits already. New
+	bugs kept showing up and the approach was getting more and more
+	complicated when I tried to fix them. So I've decided to not ignore the
+	stdisp after all. This means that it doesn't make sense to save the
+	geometry for all splits, because the statusbar moves around on
+	horizontal maximization, introducing new splits and messing with the
+	existing ones. I now use a very naive form of verification before
+	restoring the layout, which only consists in checking that all frames
+	have the FRAME_MAXED_* flag set, compare the last commit. This makes
+	things a lot easier and it should be precise enough.
+
+	TODO: The statusbar is not restored when undoing a horizontal
+	maximization. Two things are causing problems:
+	1) Simply calling a tiling_manage_stdisp or similar at the end of the
+	   restore process causes inacceptable flickering.
+	2) Resizing the statusbar will cause other windows to be resized. This
+	   will possibly lose a FRAME_MAXED_VERT flag on a frame.
+	Right now the statusbar will be automatically restored when for example
+	switching away from and back to the current workspace. Under the right
+	circumstances this causes problem 2) above.
+
+2012-05-06  Philipp Hartwig  <ph@phhart.de>
+
+	Merge remote-tracking branch 'github/maximization' into maximization
+
+2012-05-05  Arnout Engelen  <arnouten@bzzt.net>
+
+	Allow a user to remove the last workspace of a screen. doesn't seem to do much harm.
+
+2012-05-04  Arnout Engelen  <arnouten@bzzt.net>
+
+	new version of 'contrib'
+
+	Correctly escape underscores in doc
+
+2012-05-04  Philipp Hartwig  <ph@phhart.de>
+
+	Be consistent about name of the potfile
+
+	Remove PWM_CONFIGS since we no longer include pwm
+
+	Properly escape hyphens in man pages
+	This was Debian patch 215.
+
+2012-05-02  Philipp Hartwig  <ph@phhart.de>
+
+	Replace the word "statusbar" by more correct "stdisp"
+
+	Don't crash and burn if there is neither a statsubar nor a dock
+
+2012-05-02  Philipp Hartwig  <ph@phhart.de>
+
+	Mark all frames involved in a maximization as maximized
+	While this is of course not technically accurate, is has the effect that
+	we undo a maximization whenever we toggle maximization on a frame that
+	is already part of a maximized split. This is desirable for two reasons:
+
+	First, it gives the expected result on frames that have optically been
+	maximized in a maximization process but were not the one that we toggled
+	maximization on:
+	-----               -----
+	|   | vert. max. 1  | | |
+	|---| ------------> |1|2|
+	|1|2|               | | |
+	-----               -----
+	Before, trying to untoggle maximization on frame 2 would instead try to
+	maximize frame 2 which is undesirable. With the new behavior a user does
+	not have to remember on which frame he toggled maximization to undo a
+	maximization. This was explicitly requested in the discussion with the
+	subject "Toggle horizontal/vertical maximize behaviour" on ion-general.
+
+	Secondly, it even seems desirable in the following situation, where a
+	frame has not been optically maximized.
+	-----               -----
+	| 0 | vert. max. 3  | | |
+	|---| ------------> |1| |
+	|1| |               |-|3|
+	|-|3|               |2| |
+	|2| |               | | |
+	-----               -----
+	One might argue that restoring the layout when toggling vertical
+	maximization on 2 is wrong because it is not maximized yet, but
+	maximizing frame 2 in this setup would have the ugly side effect of
+	forever losing the original layout and turning frame 0 into an
+	unresponsive frame of height 0. To achieve the desired result a user
+	will now have to toggle maximization on 2 twice, first to restore the
+	actual layout and then to actually maximize it. I find this acceptable,
+	given that the end result is much cleaner.
+
+	On a side node, this commit also tries to avoid any flickering for the
+	statusbar or the dock.
+
+2012-05-02  Philipp Hartwig  <ph@phhart.de>
+
+	Merge branch 'maximization' of github.com:AopicieR/notion_aopicier into maximization
+	Conflicts:
+		modulelist.mk
+		system.mk
+
+2012-05-02  Arnout Engelen  <arnouten@bzzt.net>
+
+	add contrib, libextl, libtu as submodules
+
+2012-05-01  Arnout Engelen  <arnouten@bzzt.net>
+
+	add mod_xinerama, git_xkbevents and mod_xrandr as git submodules
+	libtu and libextl are candidates too
+
+	Merge commit 'f317f4bd08ba482203609927b3f137917cdb391e'
+
+2012-05-01  Philipp Hartwig  <ph@phhart.de>
+
+	Get closer to original environment logic
+
+2012-05-01  Arnout Engelen  <arnouten@bzzt.net>
+
+	revert accidental changes from 93fcb7dd6ffa6fc8d10c753c45ff47686c0cb1bd
+
+	Merge commit 'e2cfe8c7deb387dc3d2d7bac46486aa172435e66'
+
+	detect lua 5.2
+
+2012-05-01  Philipp Hartwig  <ph@phhart.de>
+
+	Restore original modulelist.mk and system.mk
+	Changes to these files were accidentally committed in
+	93fcb7dd6ffa6fc8d10c753c45ff47686c0cb1bd
+
+2012-05-01  Arnout Engelen  <arnouten@bzzt.net>
+
+	use 'display' rather than 'goto' in preparation of supporting lua 5.2
+
+2012-05-01  Philipp Hartwig  <ph@phhart.de>
+
+	Don't set dummy print for Lua 5.2
+	Otherwise "print" is not offered as a completion.
+
+	Change environment logic in mkman.lua
+	Set the environment of the function directly when loading the file under
+	Lua 5.2. This deals with the removal of setfenv in Lua 5.2.
+
+	goto->display
+
+	Merge branch 'master', remote-tracking branch 'upstream/master'
+
+	"foreach" is deprecated, replace by "for .. in pairs"
+
+	Change handling of environment in mod_query.lua
+	Lua 5.2 does not support set/getfenv anymore, instead the global
+	environment is stored in a variable _ENV and we can directly set the
+	environment of a function when loading it.
+
+	Only remove part of the maximized flag, v2
+	Don't remove a maximized flag if the window is only resized because we
+	have not updated the geometry after removing the statusbar.
+
+	Whitespace cleanup
+
+2012-05-01  Philipp Hartwig  <ph@phhart.de>
+
+	Revert "Only remove part of the maximized flag"
+	I forgot to actually pass the new information to
+	tiling_ignore_statusbar. But more importantly I should not mix
+	whitespace cleanup with actual changes. So let's split this up into two
+	commits and correct one of them.
+
+	This reverts commit dbfcb2220152955c8140148c90ddd0d616db1420.
+
+2012-04-30  Philipp Hartwig  <ph@phhart.de>
+
+	Only remove part of the maximized flag
+	Don't remove a maximized flag if the window is only resized because we
+	have not updated the geometry after removing the statusbar.
+
+2012-04-30  Philipp Hartwig  <ph@phhart.de>
+
+	Revert "Update geometry, even if we don't redraw the window"
+	Unfortunately this caused some flickering to reappear.
+
+	This reverts commit 6d95652fa1ee87f77296ca99fe8e0ad22d4bc419.
+
+2012-04-30  Philipp Hartwig  <ph@phhart.de>
+
+	Update geometry, even if we don't redraw the window
+	It is important that the geometry information of the window is updated,
+	otherwise we will incorrectly assume that the window has to be resized
+	on the next call to frame_fitrep.
+
+	Correctly remove maximized flag
+
+	Merge remote-tracking branch 'upstream/master' into maximization
+
+2012-04-29  Arnout Engelen  <arnouten@bzzt.net>
+
+	use 'long*' for netwm data.
+	Valgrind and the X11 source seem to suggest this is the way to go for
+	architectures where a long is 64 bits.
+
+	In preparation of supporting lua5.2, introduce an alternative name for region_goto
+	'goto' has been added as a keyword in lua5.2
+
+2012-04-26  Philipp Hartwig  <ph@phhart.de>
+
+	Merge branch 'master' into maximization
+	Conflicts:
+		modulelist.mk
+
+	Merge branch 'master' of git://notion.git.sourceforge.net/gitroot/notion/notion
+	Conflicts:
+		modulelist.mk
+
+2012-04-26  Arnout Engelen  <arnouten@bzzt.net>
+
+	Remove legacy PWM code
+
+2012-04-25  Arnout Engelen  <arnouten@bzzt.net>
+
+	Use mod_query.exec_on_merr instead of notioncore.exec_on for GUI calls
+	https://sourceforge.net/tracker/?func=detail&aid=3521445&group_id=314802&atid=1324531
+
+2012-04-25  Philipp Hartwig  <ph@phhart.de>
+
+	Merge branch 'master' of git://notion.git.sourceforge.net/gitroot/notion/notion
+
+2012-04-23  Philipp Hartwig  <ph@phhart.de>
+
+	Merge remote-tracking branch 'upstream/master' into maximization
+
+2012-04-23  Arnout Engelen  <arnouten@bzzt.net>
+
+	ion->notion
+
+	Remove memleak introduced in 9e36d26daffab2fb14db7594a6a81658f7551800
+
+2012-04-22  Philipp Hartwig  <ph@phhart.de>
+
+	Remove old maximization functions. Rename frame_maximize_vert_2 / frame_maximize_horiz_2 to frame_maximize_vert / frame_maximize_horiz. 2387dcd2d4074be79f5b99947e00b0a8b59a05a6 has dealt with any regressions I was aware of and the new functions should now be a strict improvement over the old ones.
+
+2012-04-21  Philipp Hartwig  <ph@phhart.de>
+
+	Only reprint the windows at the end of the maximization cycle This should avoid flickering and redraw problems.
+
+	Merge branch 'master' into maximization
+
+	Merge remote-tracking branch 'upstream/master'
+
+2012-04-20  Arnout Engelen  <arnouten@bzzt.net>
+
+	Refactor: remove some now-dead code
+
+	Update _NET_VIRTUAL_ROOTS to identify the WScreen(s)
+	https://sourceforge.net/tracker/index.php?func=detail&aid=3162974&group_id=314802&atid=1324528
+
+2012-04-20  Arnout Engelen  <arnouten@bzzt.net>
+
+	Revert "Remove suspicious addition of root window to 'screen' bindmap"
+	oops
+
+	This reverts commit ec9da3363c84869c4ec1f4aaf65058ab41656eca.
+
+2012-04-20  Arnout Engelen  <arnouten@bzzt.net>
+
+	Remove suspicious addition of root window to 'screen' bindmap
+
+	don't screen_update_notifywin if there is no screen attached to this region
+
+2012-04-20  Arnout Engelen  <arnouten@bzzt.net>
+
+	Revert "Remove dead 'uses_root' flag from WScreen"
+	This is an ABI change and we want to reduce those to a minimum, to keep our
+	modules as universal as possible.
+
+	This reverts commit 0d817223aaf50e909c6347e1826b00c2ebb8da3d.
+
+2012-04-20  Arnout Engelen  <arnouten@bzzt.net>
+
+	Merge branch 'rootwin_nature'
+
+	Flash fullscreen fix, huge thanks to AopicieR/Philipp Hartwig
+
+	remove redundant casts
+
+	Remove dead 'uses_root' flag from WScreen
+
+	Remove screen_fitrep hack - no longer needed (and actually harmful) now that WRootWin is no longer a WScreen
+
+2012-04-20  Philipp Hartwig  <ph@phhart.de>
+
+	Revert the essence of 88a54276c7545f759af4229bcc73f9155ede00fb The goal is to make WRootWin into a subclass of WWindow again, so that it can manage multiple WScreen's without contradicting the definition of an MPlex. In the end this will require a fundamental change to the logic of mod_xinerama.
+
+2012-04-19  Philipp Hartwig  <ph@phhart.de>
+
+	Merge branch 'master' into maximization
+
+2012-04-15  Philipp Hartwig  <ph@phhart.de>
+
+	Fix type of new function.
+
+	Fix problem with mod_xinerama and try_fullscreen, which should use a screen instead of the root window.
+
+2012-04-14  Philipp Hartwig  <ph@phhart.de>
+
+	Introduce additional check in the verification of a split.
+
+2012-04-02  Philipp Hartwig  <ph@phhart.de>
+
+	More whitespace.
+
+	Small refactoring of the verify functions and some whitespace changes.
+
+	Some cleanup and watching out for NULL pointers.
+
+	Ignore the statusbar for vertical/horizontal maximization as it massively complicates things, at least when it is not fullsized.
+
+2012-03-27  Philipp Hartwig  <ph@phhart.de>
+
+	Introduce new functions frame_maximize_vert_2/frame_maximize_horiz_2 for vertical/horizontal maximization. They are based on the following logic: When maximizing a frame, save the geometry of all frames involved in the process. When demaximizing again, try to restore the original layout using this saved information.
+
+2012-02-27  Arnout  <arnouten@bzzt.net>
+
+	Earlier fix for firefox fullscreen behavior
+	This time without touching the unmap/map/remap stuff as that's reported to
+	cause trouble like clients a
\ No newline at end of file
